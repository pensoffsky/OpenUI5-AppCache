/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/base/ManagedObject','sap/ui/dt/ElementUtil'],function(M,E){"use strict";var a=M.extend("sap.ui.dt.ManagedObjectObserver",{metadata:{abstract:true,library:"sap.ui.dt",properties:{},associations:{target:{type:"sap.ui.base.ManagedObject"}},events:{modified:{parameters:{type:"string",value:"any",oldValue:"any",target:"sap.ui.core.Element"}},destroyed:{}}}});a.prototype.init=function(){};a.prototype.exit=function(){var t=this.getTargetInstance();if(t){this.unobserve(t);}};a.prototype.setTarget=function(t){var o=this.getTargetInstance();if(o){this.unobserve(o);}this.setAssociation("target",t);var T=this.getTargetInstance();if(T){this.observe(T);}return this;};a.prototype.observe=function(t){var b=this;t.attachEvent("_change",this.fireModified,this);var o=this._fnOriginalDestroy=t.destroy;var d=false;t.destroy=function(){if(d){return;}b.unobserve(t);o.apply(this,arguments);b.fireDestroyed();};this._fnOriginalBindProperty=t.bindProperty;t.bindProperty=function(){b._fnOriginalBindProperty.apply(this,arguments);b.fireModified();};this._fnOriginalUnBindProperty=t.unbindProperty;t.unbindProperty=function(){b._fnOriginalUnBindProperty.apply(this,arguments);b.fireModified();};this._fnOriginalBindAggregation=t.bindAggregation;t.bindAggregation=function(s){b._fnOriginalBindAggregation.apply(this,arguments);b.fireModified();};this._fnOriginalUnBindAggregation=t.unbindAggregation;t.unbindAggregation=function(s){b._fnOriginalUnBindAggregation.apply(this,arguments);b.fireModified();};this._fnOriginalSetParent=t.setParent;t.setParent=function(p,s,S){var f=false;if(!this._bInSetParent){f=true;this._bInSetParent=true;}var c=this.getParent();b._fnOriginalSetParent.apply(this,arguments);if(f&&!this.__bSapUiDtSupressParentChangeEvent){this._bInSetParent=false;if(c!==p){b.fireModified({type:"setParent",value:p,oldValue:c,target:this});}}return this;};this._fnOriginalAddAggregation=t.addAggregation;t.addAggregation=function(s,O,S){b._fnOriginalAddAggregation.apply(this,arguments);b._bAddAggregationCall=true;b.fireModified({type:"addAggregation",value:O,target:this});return this;};this._fnOriginalRemoveAggregation=t.removeAggregation;t.removeAggregation=function(s,O,S){b._fnOriginalRemoveAggregation.apply(this,arguments);b.fireModified({type:"removeAggregation",value:O,target:this});return this;};this._fnOriginalInsertAggregation=t.insertAggregation;t.insertAggregation=function(s,O,i,S){b._fnOriginalInsertAggregation.apply(this,arguments);b._bInsertAggregationCall=true;b.fireModified({type:"insertAggregation",value:O,target:this});return this;};this._fnOriginalRemoveAllAggregations=t.removeAllAggregations;t.removeAllAggregations=function(s,S){var r=this.getAggregation(s);b._fnOriginalRemoveAllAggregations.apply(this,arguments);b.fireModified({type:"removeAllAggregations",value:r,target:this});return this;};this._fnOriginalDestroyAggregation=t.destroyAggregation;t.destroyAggregation=function(s,S){var r=this.getAggregation(s);b._fnOriginalDestroyAggregation.apply(this,arguments);b.fireModified({type:"destroyAggregation",value:r,target:this});return this;};b._aOriginalAddMutators={};b._aOriginalInsertMutators={};var A=t.getMetadata().getAllAggregations();Object.keys(A).forEach(function(s){var c=A[s];var _=t[c._sMutator];b._aOriginalAddMutators[c.name]=_;t[c._sMutator]=function(O){b._bAddAggregationCall=false;_.apply(this,arguments);if(!b._bAddAggregationCall){b.fireModified({type:"addAggregation",value:O,target:this});}return this;};var e=t[c._sInsertMutator];b._aOriginalInsertMutators[c.name]=e;t[c._sInsertMutator]=function(O,i){b._bInsertAggregationCall=false;e.apply(this,arguments);if(!b._bInsertAggregationCall){b.fireModified({type:"insertAggregation",value:O,target:this});}return this;};});};a.prototype.unobserve=function(t){var b=this;t.destroy=this._fnOriginalDestroy;delete this._fnOriginalDestroy;t.bindProperty=this._fnOriginalBindProperty;delete this._fnOriginalBindProperty;t.unbindProperty=this._fnOriginalUnBindProperty;delete this._fnOriginalUnBindProperty;t.bindAggregation=this._fnOriginalBindAggregation;delete this._fnOriginalBindAggregation;t.unbindAggregation=this._fnOriginalUnBindAggregation;delete this._fnOriginalUnBindAggregation;t.setParent=this._fnOriginalSetParent;delete this._fnOriginalSetParent;t.addAggregation=this._fnOriginalAddAggregation;delete this._fnOriginalAddAggregation;t.removeAggregation=this._fnOriginalRemoveAggregation;delete this._fnOriginalRemoveAggregation;t.insertAggregation=this._fnOriginalInsertAggregation;delete this._fnOriginalInsertAggregation;t.removeAllAggregations=this._fnOriginalRemoveAllAggregations;delete this._fnOriginalRemoveAllAggregations;t.destroyAggregation=this._fnOriginalDestroyAggregation;delete this._fnOriginalDestroyAggregation;var A=t.getMetadata().getAllAggregations();Object.keys(A).forEach(function(s){var o=A[s];t[o._sMutator]=b._aOriginalAddMutators[o.name];t[o._sInsertMutator]=b._aOriginalInsertMutators[o.name];});delete this._aOriginalAddMutators;delete this._aOriginalInsertMutators;t.detachEvent("_change",this.fireModified,this);};a.prototype.getTargetInstance=function(){return sap.ui.getCore().byId(this.getTarget());};return a;},true);
